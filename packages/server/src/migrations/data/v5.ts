import { PoolClient } from 'pg';
import { CustomMigrationAction, CustomPostDeployMigration } from './types';
import * as fns from '../migrate-functions';
import { prepareCustomMigrationJobData, runCustomMigration } from '../../workers/post-deploy-migration';
import { withLongRunningDatabaseClient } from '../migration-utils';

export const migration: CustomPostDeployMigration = {
  type: 'custom',
  prepareJobData: (asyncJob) => prepareCustomMigrationJobData(asyncJob),
  run: async (repo, job, jobData) => {
    return runCustomMigration(repo, job, jobData, async () => {
      return withLongRunningDatabaseClient(async (client) => {
        const actions: CustomMigrationAction[] = [];
        await run(client, actions);
        return { actions };
      });
    });
  },
};

// prettier-ignore
async function run(client: PoolClient, actions: CustomMigrationAction[]): Promise<void> {
  await fns.idempotentCreateIndex(client, actions, 'Account___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Account___version_idx" ON "Account" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ActivityDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ActivityDefinition___version_idx" ON "ActivityDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'AdverseEvent___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "AdverseEvent___version_idx" ON "AdverseEvent" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'AllergyIntolerance___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "AllergyIntolerance___version_idx" ON "AllergyIntolerance" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Appointment___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Appointment___version_idx" ON "Appointment" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'AppointmentResponse___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "AppointmentResponse___version_idx" ON "AppointmentResponse" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'AuditEvent___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "AuditEvent___version_idx" ON "AuditEvent" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Basic___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Basic___version_idx" ON "Basic" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Binary___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Binary___version_idx" ON "Binary" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'BiologicallyDerivedProduct___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "BiologicallyDerivedProduct___version_idx" ON "BiologicallyDerivedProduct" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'BodyStructure___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "BodyStructure___version_idx" ON "BodyStructure" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Bundle___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Bundle___version_idx" ON "Bundle" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'CapabilityStatement___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "CapabilityStatement___version_idx" ON "CapabilityStatement" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'CarePlan___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "CarePlan___version_idx" ON "CarePlan" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'CareTeam___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "CareTeam___version_idx" ON "CareTeam" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'CatalogEntry___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "CatalogEntry___version_idx" ON "CatalogEntry" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ChargeItem___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ChargeItem___version_idx" ON "ChargeItem" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ChargeItemDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ChargeItemDefinition___version_idx" ON "ChargeItemDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Claim___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Claim___version_idx" ON "Claim" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ClaimResponse___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ClaimResponse___version_idx" ON "ClaimResponse" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ClinicalImpression___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ClinicalImpression___version_idx" ON "ClinicalImpression" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'CodeSystem___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "CodeSystem___version_idx" ON "CodeSystem" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Communication___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Communication___version_idx" ON "Communication" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'CommunicationRequest___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "CommunicationRequest___version_idx" ON "CommunicationRequest" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'CompartmentDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "CompartmentDefinition___version_idx" ON "CompartmentDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Composition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Composition___version_idx" ON "Composition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ConceptMap___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ConceptMap___version_idx" ON "ConceptMap" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Condition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Condition___version_idx" ON "Condition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Consent___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Consent___version_idx" ON "Consent" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Contract___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Contract___version_idx" ON "Contract" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Coverage___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Coverage___version_idx" ON "Coverage" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'CoverageEligibilityRequest___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "CoverageEligibilityRequest___version_idx" ON "CoverageEligibilityRequest" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'CoverageEligibilityResponse___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "CoverageEligibilityResponse___version_idx" ON "CoverageEligibilityResponse" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'DetectedIssue___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "DetectedIssue___version_idx" ON "DetectedIssue" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Device___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Device___version_idx" ON "Device" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'DeviceDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "DeviceDefinition___version_idx" ON "DeviceDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'DeviceMetric___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "DeviceMetric___version_idx" ON "DeviceMetric" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'DeviceRequest___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "DeviceRequest___version_idx" ON "DeviceRequest" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'DeviceUseStatement___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "DeviceUseStatement___version_idx" ON "DeviceUseStatement" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'DiagnosticReport___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "DiagnosticReport___version_idx" ON "DiagnosticReport" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'DocumentManifest___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "DocumentManifest___version_idx" ON "DocumentManifest" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'DocumentReference___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "DocumentReference___version_idx" ON "DocumentReference" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'EffectEvidenceSynthesis___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "EffectEvidenceSynthesis___version_idx" ON "EffectEvidenceSynthesis" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Encounter___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Encounter___version_idx" ON "Encounter" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Endpoint___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Endpoint___version_idx" ON "Endpoint" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'EnrollmentRequest___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "EnrollmentRequest___version_idx" ON "EnrollmentRequest" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'EnrollmentResponse___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "EnrollmentResponse___version_idx" ON "EnrollmentResponse" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'EpisodeOfCare___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "EpisodeOfCare___version_idx" ON "EpisodeOfCare" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'EventDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "EventDefinition___version_idx" ON "EventDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Evidence___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Evidence___version_idx" ON "Evidence" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'EvidenceVariable___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "EvidenceVariable___version_idx" ON "EvidenceVariable" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ExampleScenario___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ExampleScenario___version_idx" ON "ExampleScenario" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ExplanationOfBenefit___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ExplanationOfBenefit___version_idx" ON "ExplanationOfBenefit" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'FamilyMemberHistory___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "FamilyMemberHistory___version_idx" ON "FamilyMemberHistory" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Flag___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Flag___version_idx" ON "Flag" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Goal___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Goal___version_idx" ON "Goal" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'GraphDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "GraphDefinition___version_idx" ON "GraphDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Group___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Group___version_idx" ON "Group" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'GuidanceResponse___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "GuidanceResponse___version_idx" ON "GuidanceResponse" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'HealthcareService___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "HealthcareService___version_idx" ON "HealthcareService" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ImagingStudy___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ImagingStudy___version_idx" ON "ImagingStudy" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Immunization___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Immunization___version_idx" ON "Immunization" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ImmunizationEvaluation___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ImmunizationEvaluation___version_idx" ON "ImmunizationEvaluation" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ImmunizationRecommendation___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ImmunizationRecommendation___version_idx" ON "ImmunizationRecommendation" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ImplementationGuide___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ImplementationGuide___version_idx" ON "ImplementationGuide" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'InsurancePlan___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "InsurancePlan___version_idx" ON "InsurancePlan" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Invoice___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Invoice___version_idx" ON "Invoice" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Library___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Library___version_idx" ON "Library" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Linkage___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Linkage___version_idx" ON "Linkage" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'List___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "List___version_idx" ON "List" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Location___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Location___version_idx" ON "Location" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Measure___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Measure___version_idx" ON "Measure" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MeasureReport___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MeasureReport___version_idx" ON "MeasureReport" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Media___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Media___version_idx" ON "Media" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Medication___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Medication___version_idx" ON "Medication" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MedicationAdministration___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MedicationAdministration___version_idx" ON "MedicationAdministration" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MedicationDispense___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MedicationDispense___version_idx" ON "MedicationDispense" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MedicationKnowledge___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MedicationKnowledge___version_idx" ON "MedicationKnowledge" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MedicationRequest___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MedicationRequest___version_idx" ON "MedicationRequest" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MedicationStatement___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MedicationStatement___version_idx" ON "MedicationStatement" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MedicinalProduct___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MedicinalProduct___version_idx" ON "MedicinalProduct" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MPA___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MPA___version_idx" ON "MedicinalProductAuthorization" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MPC___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MPC___version_idx" ON "MedicinalProductContraindication" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MedicinalProductIndication___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MedicinalProductIndication___version_idx" ON "MedicinalProductIndication" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MedicinalProductIngredient___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MedicinalProductIngredient___version_idx" ON "MedicinalProductIngredient" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MedicinalProductInteraction___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MedicinalProductInteraction___version_idx" ON "MedicinalProductInteraction" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MedicinalProductManufactured___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MedicinalProductManufactured___version_idx" ON "MedicinalProductManufactured" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MedicinalProductPackaged___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MedicinalProductPackaged___version_idx" ON "MedicinalProductPackaged" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MPP___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MPP___version_idx" ON "MedicinalProductPharmaceutical" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MPUE___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MPUE___version_idx" ON "MedicinalProductUndesirableEffect" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MessageDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MessageDefinition___version_idx" ON "MessageDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MessageHeader___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MessageHeader___version_idx" ON "MessageHeader" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'MolecularSequence___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "MolecularSequence___version_idx" ON "MolecularSequence" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'NamingSystem___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "NamingSystem___version_idx" ON "NamingSystem" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'NutritionOrder___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "NutritionOrder___version_idx" ON "NutritionOrder" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Observation___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Observation___version_idx" ON "Observation" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ObservationDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ObservationDefinition___version_idx" ON "ObservationDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'OperationDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "OperationDefinition___version_idx" ON "OperationDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'OperationOutcome___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "OperationOutcome___version_idx" ON "OperationOutcome" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Organization___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Organization___version_idx" ON "Organization" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'OrganizationAffiliation___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "OrganizationAffiliation___version_idx" ON "OrganizationAffiliation" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Parameters___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Parameters___version_idx" ON "Parameters" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Patient___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Patient___version_idx" ON "Patient" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'PaymentNotice___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "PaymentNotice___version_idx" ON "PaymentNotice" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'PaymentReconciliation___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "PaymentReconciliation___version_idx" ON "PaymentReconciliation" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Person___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Person___version_idx" ON "Person" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'PlanDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "PlanDefinition___version_idx" ON "PlanDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Practitioner___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Practitioner___version_idx" ON "Practitioner" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'PractitionerRole___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "PractitionerRole___version_idx" ON "PractitionerRole" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Procedure___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Procedure___version_idx" ON "Procedure" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Provenance___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Provenance___version_idx" ON "Provenance" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Questionnaire___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Questionnaire___version_idx" ON "Questionnaire" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'QuestionnaireResponse___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "QuestionnaireResponse___version_idx" ON "QuestionnaireResponse" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'RelatedPerson___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "RelatedPerson___version_idx" ON "RelatedPerson" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'RequestGroup___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "RequestGroup___version_idx" ON "RequestGroup" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ResearchDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ResearchDefinition___version_idx" ON "ResearchDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ResearchElementDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ResearchElementDefinition___version_idx" ON "ResearchElementDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ResearchStudy___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ResearchStudy___version_idx" ON "ResearchStudy" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ResearchSubject___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ResearchSubject___version_idx" ON "ResearchSubject" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'RiskAssessment___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "RiskAssessment___version_idx" ON "RiskAssessment" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'RiskEvidenceSynthesis___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "RiskEvidenceSynthesis___version_idx" ON "RiskEvidenceSynthesis" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Schedule___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Schedule___version_idx" ON "Schedule" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'SearchParameter___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "SearchParameter___version_idx" ON "SearchParameter" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ServiceRequest___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ServiceRequest___version_idx" ON "ServiceRequest" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Slot___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Slot___version_idx" ON "Slot" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Specimen___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Specimen___version_idx" ON "Specimen" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'SpecimenDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "SpecimenDefinition___version_idx" ON "SpecimenDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'StructureDefinition___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "StructureDefinition___version_idx" ON "StructureDefinition" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'StructureMap___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "StructureMap___version_idx" ON "StructureMap" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Subscription___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Subscription___version_idx" ON "Subscription" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'SubscriptionStatus___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "SubscriptionStatus___version_idx" ON "SubscriptionStatus" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Substance___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Substance___version_idx" ON "Substance" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'SubstanceNucleicAcid___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "SubstanceNucleicAcid___version_idx" ON "SubstanceNucleicAcid" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'SubstancePolymer___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "SubstancePolymer___version_idx" ON "SubstancePolymer" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'SubstanceProtein___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "SubstanceProtein___version_idx" ON "SubstanceProtein" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'SubstanceReferenceInformation___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "SubstanceReferenceInformation___version_idx" ON "SubstanceReferenceInformation" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'SubstanceSourceMaterial___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "SubstanceSourceMaterial___version_idx" ON "SubstanceSourceMaterial" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'SubstanceSpecification___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "SubstanceSpecification___version_idx" ON "SubstanceSpecification" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'SupplyDelivery___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "SupplyDelivery___version_idx" ON "SupplyDelivery" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'SupplyRequest___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "SupplyRequest___version_idx" ON "SupplyRequest" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Task___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Task___version_idx" ON "Task" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'TerminologyCapabilities___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "TerminologyCapabilities___version_idx" ON "TerminologyCapabilities" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'TestReport___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "TestReport___version_idx" ON "TestReport" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'TestScript___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "TestScript___version_idx" ON "TestScript" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ValueSet___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ValueSet___version_idx" ON "ValueSet" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'VerificationResult___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "VerificationResult___version_idx" ON "VerificationResult" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'VisionPrescription___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "VisionPrescription___version_idx" ON "VisionPrescription" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Project___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Project___version_idx" ON "Project" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ClientApplication___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ClientApplication___version_idx" ON "ClientApplication" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'User___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "User___version_idx" ON "User" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'ProjectMembership___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "ProjectMembership___version_idx" ON "ProjectMembership" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Bot___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Bot___version_idx" ON "Bot" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Login___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Login___version_idx" ON "Login" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'PasswordChangeRequest___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "PasswordChangeRequest___version_idx" ON "PasswordChangeRequest" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'UserSecurityRequest___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "UserSecurityRequest___version_idx" ON "UserSecurityRequest" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'JsonWebKey___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "JsonWebKey___version_idx" ON "JsonWebKey" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'AccessPolicy___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "AccessPolicy___version_idx" ON "AccessPolicy" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'UserConfiguration___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "UserConfiguration___version_idx" ON "UserConfiguration" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'BulkDataExport___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "BulkDataExport___version_idx" ON "BulkDataExport" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'SmartAppLaunch___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "SmartAppLaunch___version_idx" ON "SmartAppLaunch" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'DomainConfiguration___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "DomainConfiguration___version_idx" ON "DomainConfiguration" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'AsyncJob___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "AsyncJob___version_idx" ON "AsyncJob" ("__version")');
  await fns.idempotentCreateIndex(client, actions, 'Agent___version_idx', 'CREATE INDEX CONCURRENTLY IF NOT EXISTS "Agent___version_idx" ON "Agent" ("__version")');
}
