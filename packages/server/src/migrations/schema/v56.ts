/*
 * Generated by @medplum/generator
 * Do not edit manually.
 */

import { PoolClient } from 'pg';

export async function run(client: PoolClient): Promise<void> {
  await client.query('ALTER TABLE IF EXISTS "SubscriptionStatus" ADD COLUMN IF NOT EXISTS "projectId" UUID');
  await client.query('ALTER TABLE IF EXISTS "SubscriptionStatus" ADD COLUMN IF NOT EXISTS "_security" TEXT[]');
  await client.query(
    'CREATE INDEX CONCURRENTLY IF NOT EXISTS SubscriptionStatus_projectId_idx ON "SubscriptionStatus" ("projectId")'
  );
  await client.query(
    'CREATE INDEX CONCURRENTLY IF NOT EXISTS SubscriptionStatus__security_idx ON "SubscriptionStatus" ("_security")'
  );
  await client.query('ALTER TABLE IF EXISTS "Agent" ALTER COLUMN "projectId" TYPE UUID');
}
