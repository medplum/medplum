---
sidebar_position: 20
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Run the Stack

Follow these instructions to get the complete Medplum stack running directly on your host machine.

## Prerequisites

1. **Npm**: See [the npm documentation](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm) for instructions on installing it with your OS.
2. [Clone the Medplum repo](./clone-the-repo)

:::note Note for windows Users

Running on Windows is supported, but several build tools use bash scripts. We recommend [MSYS2](https://www.msys2.org/) to run them.

:::

## Install

Our monorepo uses [npm workspaces](https://docs.npmjs.com/cli/v7/using-npm/workspaces), so installing dependencies for all projects is done using normal `npm install`:

```sh
cd medplum
npm ci
```

## Background services

The Medplum Stack requires the following services to be running in your environment:

- [PostgreSQL](https://www.postgresql.org/) for the primary database
- [Redis](https://redis.com/) for caching and job queueing

When running this services on your local machine you can either use Docker (recommended) or install them directly onto your machine.

import DockerSetup from './_background-services-docker.mdx';
import ManualSetup from './_background-services-manual.mdx';
import styles from './styles.module.css';

<Tabs
  attributes={{className: styles.border}}
  defaultValue="docker"
  lazy
  values={[
    { label: 'Using Docker (Recommended)', value: 'docker' },
    { label: 'Deploying manually', value: 'manual' },
  ]}
>
  <TabItem value="docker"><DockerSetup /></TabItem>
  <TabItem value="manual"><ManualSetup /></TabItem>

</Tabs>

## Build and Test

We provide convenience scripts to perform a full build and test:

```sh
./scripts/build.sh
```

This will do the following:

- Install npm dependencies if not already installed
- Build all packages
- Run all tests
- Run linter

## Run

### Start the servers

After you have PostgreSQL and Redis up and running, you can run the Medplum API server.

From your root `medplum` directory run:

```sh
cd packages/server
npm run dev
```

This will seed the medplum database with an example project and user.
The email and password for the example user are:

|              |                   |
| ------------ | ----------------- |
| **Email**    | admin@example.com |
| **Password** | medplum_admin     |

To make sure the server is working, you can access the health check at <http://localhost:8103/healthcheck>

If everything is working, you should see the following in your browser:

```json
{ "ok": true, "postgres": true, "redis": true }
```

### Run the Medplum Web App

Lastly, you can start the Medplum Wep App.

From your root `medplum` directory run:

```sh
cd packages/app
npm run dev
```

You can access the app at <http://localhost:3000/>
