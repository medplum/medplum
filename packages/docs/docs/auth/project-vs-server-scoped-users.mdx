---
sidebar_position: 11
tags: [auth]
---

# Project vs Server Scoped Users

You can specify the scope of a [User](/docs/api/fhir/medplum/user) by adding the `scope` parameter to the [Invite User](/docs/api/project-admin/invite) endpoint.

```ts
const response = await medplum.post('/admin/projects/:projectId/invite', {
  resourceType: 'Practitioner',
  firstName: 'Test',
  lastName: 'User',
  email: 'test@example.com',
  scope: 'project' // or 'server'
})
```
 **Server Scoped Users** - Used for developers and administrators that need to interact with multiple projects (e.g. staging and production).

 **Project Scoped Users** - Used for real practicing clinicians and patients that will only interact with your single production project. By default, the server scopes all Patient [`Users`](https://www.medplum.com/docs/api/fhir/medplum/user) to the project.


```mermaid
flowchart TD
    subgraph MedplumServer["<div style='font-size:25px; font-weight:bold;'>Medplum Server</div>"]
        %% Serverâ€‘Scoped User
        SS1[<div style="text-align: center;">User<br><strong>Company Dev/Admin</strong><br><small><em style='color:gray;'>Server Scoped</em></small></div>]
        SS1 --> PM1_SS1
        SS1 --> PM2_SS1

        %% Staging Project subgraph
        subgraph StagingProject["<div style='font-size:20px; font-weight:bold;'>Staging Project</div>"]
            SD1[<div style="text-align: center;">User<br><strong>Test Doctor 1</strong><br><small><em style='color:gray;'>Project Scoped</em></small></div>]
            PM1[<div style="text-align: center;">ProjectMembership<br><small style='color:gray;'>Project: Staging Project<br>Profile: &lt;Practitioner&gt;</small></div>]
            SD1 --> PM1

            PAT1[<div style="text-align: center;">User<br><strong>Example Patient 1</strong><br><small><em style='color:gray;'>Project Scoped</em></small></div>]
            PM_PAT1[<div style="text-align: center;">ProjectMembership<br><small style='color:gray;'>Project: Staging Project<br>Profile: &lt;Patient&gt;</small></div>]
            PAT1 --> PM_PAT1

            PM1_SS1[<div style="text-align: center;">ProjectMembership<br><small style='color:gray;'>Project: Staging Project<br>Profile: &lt;Practitioner&gt;</small></div>]
        end

        %% Production Project subgraph
        subgraph ProdProject["<div style='font-size:20px; font-weight:bold;'>Production Project</div>"]
            PAT2[<div style="text-align: center;">User<br><strong>John Doe</strong><br><small><em style='color:gray;'>Project Scoped</em></small></div>]
            PM_PAT2[<div style="text-align: center;">ProjectMembership<br><small style='color:gray;'>Project: Production Project<br>Profile: &lt;Patient&gt;</small></div>]
            PAT2 --> PM_PAT2

            DR_SMITH[<div style="text-align: center;">User<br><strong>Dr. Alice Smith</strong><br><small><em style='color:gray;'>Project Scoped</em></small></div>]
            DR_SMITH_PM[<div style="text-align: center;">ProjectMembership<br><small style='color:gray;'>Project: Production Project<br>Profile: &lt;Practitioner&gt;</small></div>]
            DR_SMITH --> DR_SMITH_PM

            PM2_SS1[<div style="text-align: center;">ProjectMembership<br><small style='color:gray;'>Project: Production Project<br>Profile: &lt;Practitioner&gt;</small></div>]
        end
    end

    style MedplumServer fill:#f5f5f5,stroke:#888888,stroke-width:2px;

```


:::info
For **hosted customers**, you will only have control over the User resources for your project scoped users, but hosted customers can access **server scoped users** from their [super admin project](/docs/self-hosting/super-admin-guide).
:::

:::note
If you want to create a [custom email flow](/docs/auth/custom-emails) for your Practitioners, they will need to be invited as a Project Scoped Users so that the UserSecurityRequest resources are also scoped to the project.
:::
